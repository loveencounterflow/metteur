{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/cli.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n\n'use strict'\n\n\n############################################################################################################\nGUY                       = require 'guy'\n{ debug\n  info\n  whisper\n  warn\n  urge\n  help }                  = GUY.trm.get_loggers 'METTEUR/cli'\n{ rpr\n  echo }                  = GUY.trm\n#...........................................................................................................\nPATH                      = require 'node:path'\nFS                        = require 'fs-extra'\nCP                        = require 'node:child_process'\ntypes                     = require './types'\n{ isa\n  validate }              = types\nMIXA                      = require 'mixa'\nGUY                       = require 'guy'\n{ lime\n  blue\n  grey }                  = GUY.trm\n{ Metteur }               = require './main'\n{ to_width }              = require 'to-width'\ndeep_copy                 = ( require 'rfdc' ) { proto: true, circles: false, }\n$$                        = ( P... ) -> ( await $ P... ).stdout.trim()\n\n#-----------------------------------------------------------------------------------------------------------\nresolve = ( P... ) ->\n  return PATH.resolve PATH.join P... if P[ 0 ].startsWith '/'\n  return PATH.resolve PATH.join process.env.cwd, P...\n\n#-----------------------------------------------------------------------------------------------------------\nrun_tex_etc = ( cfg ) ->\n  await GUY.temp.with_directory { keep: false, }, ({ path }) ->\n    cfg.tex_working_path  = path\n    cfg.tex_target_path   = resolve cfg.tex_working_path, 'booklet.tex'\n    cfg.tex_pdf_path      = resolve cfg.tex_working_path, 'booklet.pdf'\n    FS.writeFileSync cfg.tex_target_path, cfg.imposition\n    whisper \"wrote imposition to #{cfg.tex_target_path}\"\n    await _run_tex cfg\n    if FS.pathExistsSync cfg.tex_pdf_path\n      FS.moveSync cfg.tex_pdf_path, cfg.output, { overwrite: cfg.overwrite, }\n      help \"wrote output to #{cfg.output}\"\n    else\n      warn GUY.trm.reverse \" ^metteur/cli@34^ no output produced \"\n      process.exit 1\n    return null\n  return cfg\n\n#-----------------------------------------------------------------------------------------------------------\nnew_hash          = -> ( require 'crypto' ).createHash 'sha1'\ndigest_from_path  = ( path ) -> ( new_hash().update FS.readFileSync path ).digest 'hex'\n\n#-----------------------------------------------------------------------------------------------------------\npath_from_executable_name = ( name ) ->\n  await import( 'zx/globals' )\n  try return await $$\"\"\"command -v #{name}\"\"\" catch error\n    warn \"^6456^\", \"\"\"\n      unable to locate #{name};\n      please refer to [section *External Dependencies*](https://github.com/loveencounterflow/metteur#external-dependencies) in the README.md\"\"\"\n    throw error\n\n#-----------------------------------------------------------------------------------------------------------\n_run_tex = ( cfg ) ->\n  paths =\n    xelatex: await path_from_executable_name 'xelatex'\n  #---------------------------------------------------------------------------------------------------------\n  cd cfg.tex_working_path\n  ### TAINT use loop, check *.aux for changes ###\n  log_path    = PATH.join cfg.tex_working_path, 'xelatex-output'\n  aux_path    = PATH.join cfg.tex_working_path, 'booklet.aux'\n  ### TAINT this method has the drawback that we always run at least twice ###\n  new_digest  = null\n  old_digest  = null\n  loop\n    try\n      await $\"\"\"time #{paths.xelatex} --halt-on-error booklet.tex > xelatex-output\"\"\"\n    catch error\n      echo FS.readFileSync log_path, { encoding: 'utf-8', }\n      warn error.exitCode\n      throw error\n    break if ( new_digest = digest_from_path aux_path ) is old_digest\n    old_digest = new_digest\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\nshow_cfg = ( cfg ) ->\n  whisper()\n  # whisper \"#{to_width \"#{key}:\", 20} #{value}\" for key, value of cfg\n  console.table ( { key, value, } for key, value of cfg )\n  whisper()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\nfetch_pagecount = ( cfg ) ->\n  await import( 'zx/globals' )\n  verbose       = $.verbose; $.verbose = false\n  pdfinfo_path  = await path_from_executable_name 'pdfinfo'\n  R             = ( await $\"#{pdfinfo_path} #{cfg.input} | grep -Pi '^Pages:'\" ).stdout.trim()\n  R             = R.replace /^.*\\s+(\\d+)$/, \"$1\"\n  R             = parseInt R, 10\n  $.verbose     = verbose\n  info '^690-1^', \"PDF #{cfg.input} has #{R} pages\"\n  return R\n\n#-----------------------------------------------------------------------------------------------------------\nfetch_pagedistro = ( cfg ) ->\n  cfg.pagecount       = await fetch_pagecount cfg\n  cfg.sheetcount      = cfg.pagecount // cfg.layout.pps\n  remainder           = cfg.pagecount %% cfg.layout.pps\n  cfg.sheetcount++ if remainder isnt 0\n  cfg.blank_pagecount = cfg.layout.pps - remainder\n  R                   = [ 1 .. cfg.pagecount ]\n  return R if cfg.blank_pagecount is 0\n  split               = deep_copy cfg.mtr_split\n  #.........................................................................................................\n  ### turn RPNRs into LPNRs ###\n  ### TAINT correct or complain about PNRs outside the allowed range ###\n  for d in split\n    if isa.negative d.pnr\n      d.pnr = cfg.pagecount + d.pnr\n  #.........................................................................................................\n  inserts = {}\n  bpc     = cfg.blank_pagecount\n  loop\n    break if bpc < 0\n    for d in split\n      continue if d.count <= 0\n      bpc--\n      break if bpc < 0\n      d.count--\n      inserts[ d.pnr ] = ( inserts[ d.pnr ] ?= 0 ) + 1\n  #.........................................................................................................\n  R = ( [ pnr, ] for pnr in R )\n  for pnr_txt, count of inserts\n    pnr = parseInt pnr_txt, 10\n    idx = pnr - 1\n    # ### thx to https://2ality.com/2018/12/creating-arrays.html#creating-ranges-of-integer-values ###\n    # R[ idx ].push Array.from { length, }, ( _, i ) -> -1\n    R[ idx ].push -1 for _ in [ 1 .. count ]\n  R = R.flat()\n  #.........................................................................................................\n  return R\n\n\n#===========================================================================================================\n#\n#-----------------------------------------------------------------------------------------------------------\n@cli = ->\n  #.........................................................................................................\n  jobdefs =\n    # meta:\n    commands:\n      #-----------------------------------------------------------------------------------------------------\n      'help':\n        runner: ( d ) =>\n          debug '^690-1^', process.argv\n          echo lime \"\"\"Metteur: produce impositions for booklets with 4, 8 or 16 pages arranged on one sheet\"\"\"\n          echo blue \"\"\"\n            Usage:\n              metteur impose [flags]\n                --input       -i\n                --overwrite   -y\n                --output      -o\n                --split\n            \"\"\"\n      #-----------------------------------------------------------------------------------------------------\n      'impose':\n        description:  \"assemble pages from one PDF file into a new PDF, to be folded into a booklet\"\n        runner: ( d ) =>\n          cfg             = types.create.mtr_impose_cfg d.verdict.parameters\n          ### TAINT inconsistent naming ###\n          cfg.mtr_split   = types.data.mtr_split\n          cfg.input       = resolve cfg.input\n          cfg.output      = resolve cfg.output\n          cfg.pagedistro  = await fetch_pagedistro cfg\n          debug '^3553^', { pagedistro: cfg.pagedistro, }\n          show_cfg cfg\n          mtr             = new Metteur()\n          cfg.imposition  = mtr._impose cfg\n          # process.exit 111\n          await run_tex_etc cfg\n          return null\n        flags:\n          'layout':\n            alias:        'l'\n            type:         String\n            description:  \"name of a layout; defaults to 'pps16'\"\n          'input':\n            alias:        'i'\n            type:         String\n            # positional:   true\n            # multiple:     'greedy'\n            description:  \"input file (providing the individual pages)\"\n          'output':\n            alias:        'o'\n            type:         String\n            # positional:   true\n            description:  \"output file (containing the booklet with multiple pages per sheet, front and back)\"\n          'overwrite':\n            alias:        'y'\n            type:         Boolean\n            # positional:   true\n            description:  \"whether to overwrite output file\"\n          'split':\n            # alias:        'y'\n            type:         String\n            # positional:   true\n            description:  \"use positive page nr or negative count to control insertion of empty pages\"\n      #-----------------------------------------------------------------------------------------------------\n      # 'tex':\n      #   description:  \"run XeLaTeX on tex/booklet.tex to produce tex/booklet.pdf\"\n        # runner: run_tex\n  #.........................................................................................................\n  MIXA.run jobdefs, process.argv\n  return null\n\n\n\n############################################################################################################\nif module is require.main then do =>\n  # await demo_receiver()\n  await @cli()\n\n"
  ]
}